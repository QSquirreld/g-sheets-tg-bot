# Телеграм бот для сбора информации(текста и мультимедиа).

Программа реализует сбор различной информации, в т.ч. различных типов, с последующей записью в гугл таблице, с целью формирования сметы или какого-либо другого взаимодействия.

Aiogram + Google API

## Описание

1. Программа реализует сбор различной информации, в т.ч. различных типов, с последующей записью в гугл таблице, с целью формирования сметы или какого-либо другого взаимодействия.

2. Телеграм бот сопровождает пользователя, задавая вопросы, ответ на который формирует конечный запрос и записывает его в таблицу.

3. __Данные__ которые собирает бот:
* Наименование;
* ФИО;
* Статус;
* Данные счёта;
* Сумма в рублях;
* Подтверждающие фото.

4. Эти данные, подвегаются проверке/валидации, в т.ч. с помощью регулярных выражений.

5. В случае отправки мультимедиа, оно сначала загружется в папку гугл диска, а потом ссылка на него отправляется в  таблицу.

6. Завершающий этап общения с ботом состоит в проверке указанных данных, в случае если данные введены неверно, есть возможность начать сначала(такая возможность есть на каждом этапе).

## Структура
- run.py:
  - Запускает бота;
  - Проверяет корректность заголовков таблицы.

- fsms.py:
  - Хранит в себе "состояния"(этапы) бота.

- handlers.py:
  - Хранит команды (help, start);
  - Хранит текстовые команды (Помощь, Назад, команда начинающая цикл сбора данных);
  - Этапы сбора данных;
  - Проверяет введённые данные на корректность для конкретного этапа;
  - Выводит пользователю введённые данные для проверки верности заполнения;
  - Отправляет данные в гугл таблицы.

- keyboards.py:
  - Хранит в себе все клавиатуры и кнопки.

- google_table.py:
  - Устанавливает заголовки в таблице;
  - Записывает указанные данные в таблицу;
  - Проверяет, что данные были успешно "доставлены" в таблицу.

- google_drive.py:
  - Скачивает фото из телеграма и загружает на сервер;
  - Загружает фото с сервера в папку гугл диска;
  - Проверяет наличие загруженного фото в папке;
  - Составляет ссылку на фото из гугл диска, для последующей вставки в гугл таблицу;
  - Отправляет ссылку в гугл таблицы;
  - Удаляет скаченное фото с сервера.

## Основные библиотеки
- aiogram
- pydantic
- google api

## Требования

- Код был написан на Python 3.12
- Зависимости из файла `requirements.txt`
